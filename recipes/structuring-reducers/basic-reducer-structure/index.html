<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/redux-in-chinese/blog/rss.xml" title="Redux 中文官网 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/redux-in-chinese/blog/atom.xml" title="Redux 中文官网 Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux 中文官网" href="/redux-in-chinese/opensearch.xml"><title data-react-helmet="true">Basic Reducer Structure | Redux 中文官网</title><meta data-react-helmet="true" property="og:url" content="https://cn.redux.js.org/redux-in-chinese/recipes/structuring-reducers/basic-reducer-structure"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Basic Reducer Structure | Redux 中文官网"><meta data-react-helmet="true" name="description" content="Structuring Reducers &gt; Basic Reducer Structure: Overview of how reducer functions work with Redux state"><meta data-react-helmet="true" property="og:description" content="Structuring Reducers &gt; Basic Reducer Structure: Overview of how reducer functions work with Redux state"><meta data-react-helmet="true" property="og:image" content="https://cn.redux.js.org/redux-in-chinese/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image" content="https://cn.redux.js.org/redux-in-chinese/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/redux-in-chinese/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://cn.redux.js.org/redux-in-chinese/recipes/structuring-reducers/basic-reducer-structure"><link data-react-helmet="true" rel="alternate" href="https://cn.redux.js.org/redux-in-chinese/recipes/structuring-reducers/basic-reducer-structure" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://cn.redux.js.org/redux-in-chinese/recipes/structuring-reducers/basic-reducer-structure" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/redux-in-chinese/assets/css/styles.01e0d58b.css">
<link rel="preload" href="/redux-in-chinese/assets/js/runtime~main.e4e798f7.js" as="script">
<link rel="preload" href="/redux-in-chinese/assets/js/main.32f71617.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/redux-in-chinese/"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Redux 中文官网</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/redux-in-chinese/introduction/getting-started">入门</a><a class="navbar__item navbar__link" href="/redux-in-chinese/tutorials/essentials/part-1-overview-concepts">教程</a><a class="navbar__item navbar__link" href="/redux-in-chinese/api/api-reference">API</a><a class="navbar__item navbar__link" href="/redux-in-chinese/faq">常见问题</a><a class="navbar__item navbar__link" href="/redux-in-chinese/style-guide/style-guide">最佳实践</a><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">源码</a><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">纠错</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/redux-in-chinese/"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Redux 中文官网</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/redux-in-chinese/introduction/getting-started">入门</a></li><li class="menu__list-item"><a class="menu__link" href="/redux-in-chinese/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="menu__list-item"><a class="menu__link" href="/redux-in-chinese/api/api-reference">API</a></li><li class="menu__list-item"><a class="menu__link" href="/redux-in-chinese/faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/redux-in-chinese/style-guide/style-guide">最佳实践</a></li><li class="menu__list-item"><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="menu__link">源码</a></li><li class="menu__list-item"><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="menu__link">纠错</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">简介</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/getting-started">入门 Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/installation">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/core-concepts">核心概念</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/learning-resources">学习资源</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/ecosystem">生态</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/introduction/examples">示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">教程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/index">教程目录</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redux 循序渐进</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-1-overview-concepts">基础概念</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-2-app-structure">应用结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-3-data-flow">数据流基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-4-using-data">使用数据</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-5-async-logic">异步逻辑与数据请求</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/essentials/part-6-performance-normalization">性能与数据范式化</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redux 深入浅出</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-1-overview">Redux Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-2-concepts-data-flow">Redux Concepts and Data Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-3-state-actions-reducers">State, Actions, and Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-4-store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-5-ui-react">UI and React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-6-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-7-standard-patterns">Standard Redux Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/tutorials/fundamentals/part-8-modern-redux">Modern Redux with Redux Toolkit</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">技巧</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/recipe-index">Recipes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/configuring-your-store">Configuring Your Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/usage-with-typescript">Usage with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/migrating-to-redux">Migrating to Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/using-object-spread-operator">Using Object Spread Operator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/reducing-boilerplate">Reducing Boilerplate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/server-rendering">Server Rendering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/writing-tests">Writing Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/computing-derived-data">Computing Derived Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/implementing-undo-history">Implementing Undo History</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/isolating-redux-sub-apps">Isolating Redux Sub-Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/code-splitting">Code Splitting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">组织 Reducers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/structuring-reducers">Structuring Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/prerequisite-concepts">Prerequisite Reducer Concepts</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/basic-reducer-structure">Basic Reducer Structure and State Shape</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/splitting-reducer-logic">Splitting Up Reducer Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/refactoring-reducer-example">Refactoring Reducer Logic Using Functional Decomposition and Reducer Composition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/using-combinereducers">Using `combineReducers`</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/beyond-combinereducers">Beyond `combineReducers`</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/normalizing-state-shape">Normalizing State Shape</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/updating-normalized-data">Managing Normalized Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/reusing-reducer-logic">Reusing Reducer Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/immutable-update-patterns">Immutable Update Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-in-chinese/recipes/structuring-reducers/initializing-state">Initializing State</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">深入理解 Redux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">像 Redux 一样思考</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/understanding/thinking-in-redux/motivation">动机</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/understanding/thinking-in-redux/three-principles">三大原则</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/understanding/thinking-in-redux/glossary">词汇表</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">历史与设计原则</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/understanding/history-and-design/prior-art">先前技术</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/understanding/history-and-design/middleware">Middleware</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">常见问题</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq">Redux FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/general">Redux FAQ: General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/reducers">Redux FAQ: Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/organizing-state">Redux FAQ: Organizing State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/store-setup">Redux FAQ: Store Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/actions">Redux FAQ: Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/immutable-data">Redux FAQ: Immutable Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/code-structure">Redux FAQ: Code Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/performance">Redux FAQ: Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/design-decisions">Redux FAQ: Design Decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/react-redux">Redux FAQ: React Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/faq/miscellaneous">Redux FAQ: Miscellaneous</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">编码规范</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/style-guide/style-guide">Style Guide: Best Practices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API 文档</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/createstore">createStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/combinereducers">combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/applymiddleware">applyMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/bindactioncreators">bindActionCreators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/api/compose">compose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-in-chinese/redux-toolkit/overview">Redux Toolkit: 概览</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Basic Reducer Structure and State Shape</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-reducer-structure"></a>Basic Reducer Structure<a class="hash-link" href="#basic-reducer-structure" title="Direct link to heading">#</a></h2><p>First and foremost, it&#x27;s important to understand that your entire application really only has <strong>one single reducer function</strong>: the function that you&#x27;ve passed into <code>createStore</code> as the first argument. That one single reducer function ultimately needs to do several things:</p><ul><li>The first time the reducer is called, the <code>state</code> value will be <code>undefined</code>. The reducer needs to handle this case by supplying a default state value before handling the incoming action.</li><li>It needs to look at the previous state and the dispatched action, and determine what kind of work needs to be done</li><li>Assuming actual changes need to occur, it needs to create new objects and arrays with the updated data and return those</li><li>If no changes are needed, it should return the existing state as-is.</li></ul><p>The simplest possible approach to writing reducer logic is to put everything into a single function declaration, like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">counter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;undefined&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    state </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"> </span><span class="token comment" style="color:#c6cad2">// If state is undefined, initialize it with a default value</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;INCREMENT&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;DECREMENT&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">-</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state </span><span class="token comment" style="color:#c6cad2">// In case an action is passed in we don&#x27;t understand</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Notice that this simple function fulfills all the basic requirements. It returns a default value if none exists, initializing the store; it determines what sort of update needs to be done based on the type of the action, and returns new values; and it returns the previous state if no work needs to be done.</p><p>There are some simple tweaks that can be made to this reducer. First, repeated <code>if</code>/<code>else</code> statements quickly grow tiresome, so it&#x27;s very common to use <code>switch</code> statements instead. Second, we can use ES6&#x27;s default parameter values to handle the initial &quot;no existing data&quot; case. With those changes, the reducer would look like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">counter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color:#F8F8F2">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#AE81FF">0</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;INCREMENT&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;DECREMENT&#x27;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">-</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is the basic structure that a typical Redux reducer function uses.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-state-shape"></a>Basic State Shape<a class="hash-link" href="#basic-state-shape" title="Direct link to heading">#</a></h2><p>Redux encourages you to think about your application in terms of the data you need to manage. The data at any given point in time is the &quot;<em>state</em>&quot; of your application, and the structure and organization of that state is typically referred to as its &quot;<em>shape</em>&quot;. The shape of your state plays a major role in how you structure your reducer logic.</p><p>A Redux state usually has a plain Javascript object as the top of the state tree. (It is certainly possible to have another type of data instead, such as a single number, an array, or a specialized data structure, but most libraries assume that the top-level value is a plain object.) The most common way to organize data within that top-level object is to further divide data into sub-trees, where each top-level key represents some &quot;domain&quot; or &quot;slice&quot; of related data. For example, a basic Todo app&#x27;s state might look like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  visibilityFilter</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;SHOW_ALL&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  todos</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      text</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Consider using Redux&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token boolean" style="color:#AE81FF">true</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      text</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Keep all state in a single tree&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token boolean" style="color:#AE81FF">false</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In this example, <code>todos</code> and <code>visibilityFilter</code> are both top-level keys in the state, and each represents a &quot;slice&quot; of data for some particular concept.</p><p>Most applications deal with multiple types of data, which can be broadly divided into three categories:</p><ul><li><em>Domain data</em>: data that the application needs to show, use, or modify (such as &quot;all of the Todos retrieved from the server&quot;)</li><li><em>App state</em>: data that is specific to the application&#x27;s behavior (such as &quot;Todo #5 is currently selected&quot;, or &quot;there is a request in progress to fetch Todos&quot;)</li><li><em>UI state</em>: data that represents how the UI is currently displayed (such as &quot;The EditTodo modal dialog is currently open&quot;)</li></ul><p>Because the store represents the core of your application, you should <strong>define your state shape in terms of your domain data and app state, not your UI component tree</strong>. As an example, a shape of <code>state.leftPane.todoList.todos</code> would be a bad idea, because the idea of &quot;todos&quot; is central to the whole application, not just a single part of the UI. The <code>todos</code> slice should be at the top of the state tree instead.</p><p>There will <em>rarely</em> be a 1-to-1 correspondence between your UI tree and your state shape. The exception to that might be if you are explicitly tracking various aspects of UI data in your Redux store as well, but even then the shape of the UI data and the shape of the domain data would likely be different.</p><p>A typical app&#x27;s state shape might look roughly like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    domainData1 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    domainData2 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    appState1 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    appState2 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    ui </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        uiState1 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        uiState2 </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/redux-in-chinese/recipes/structuring-reducers/prerequisite-concepts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Prerequisite Reducer Concepts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/redux-in-chinese/recipes/structuring-reducers/splitting-reducer-logic"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Splitting Up Reducer Logic »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-reducer-structure" class="table-of-contents__link">Basic Reducer Structure</a></li><li><a href="#basic-state-shape" class="table-of-contents__link">Basic State Shape</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/redux-in-chinese/introduction/getting-started">入门</a></li><li class="footer__item"><a class="footer__link-item" href="/redux-in-chinese/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="footer__item"><a class="footer__link-item" href="/redux-in-chinese/faq">常见问题</a></li><li class="footer__item"><a class="footer__link-item" href="/redux-in-chinese/api/api-reference">API 文档</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord</a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="/redux-in-chinese/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/redux-in-chinese/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2015–2021 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/redux-in-chinese/assets/js/runtime~main.e4e798f7.js"></script>
<script src="/redux-in-chinese/assets/js/main.32f71617.js"></script>
</body>
</html>